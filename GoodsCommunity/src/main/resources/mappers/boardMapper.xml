<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="edu.thejoeun.board.model.mapper.BoardMapper">
<!--
DTO 필드명과 조회된 컬럼명이 일치하지 않을 때는
매핑시켜주는 역할을 하는 resultMap 을 사용하는 게 좋다.

<collection> 을 resultMap 내부에 작성하는 경우
여러 행의 결과가 조회되는 다른 SELECT 수행한 후
그 결과를 지정된 DTO 필드에 대입할 때 사용.

<resultMap>
type 속성 : 연결할 DTO 경로 또는 별칭
id       : 해당 태그를 식별할 값 (이름 지정)

<collection>
property : List 를 담을 DTO 필드명
select   : 실행할 SELECT 의 id
column   : 조회 결과 중 지정된 컬럼의 값을 파라미터로 전달
javaType : List(컬렉션)의 타입을 지정
ofType   : List(컬렉션)의 제네릭(타입 제한) 지정
-->
    <select id="getAllBoard" resultType="Board">
        SELECT *
        FROM board
        ORDER BY created_at DESC
    </select>

    <!--
    parameterType
    resultType
    resultMap
    이건 거의 문제가 안 되고
    거의 나의 코드 문제....
    SQL, Java, HTML 구문 문제다~
    크게 의미 없으며, id 와 where 절 데이터타입 명칭을 잘 썼는지 확인
     -->
    <select id="getBoardById" resultType="Board" >
        SELECT *
        FROM board
        WHERE id = #{id}
    </select>

    <!--
    게시물 추가/수정/삭제
    조회수 증가
    전체 게시물 수 조회
    게시물 페이징 조회
    게시물 검색
    검색 결과 수 조회
    작성자로 게시물 조회
    최신 게시물 n개 조회
    인기 게시물 조회(조회 수 높은 순)
    ...
    -->
</mapper>
